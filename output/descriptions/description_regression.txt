Logistic regression based on descriptions 

MedGemma on Messidor: tf-idf
              precision    recall  f1-score   support

           0       0.88      1.00      0.93        21
           1       1.00      0.79      0.88        14

    accuracy                           0.91        35
   macro avg       0.94      0.89      0.91        35
weighted avg       0.93      0.91      0.91        35

******
Gpt on messidor: tfidf 
              precision    recall  f1-score   support

           0       0.83      0.90      0.86        21
           1       0.83      0.71      0.77        14

    accuracy                           0.83        35
   macro avg       0.83      0.81      0.82        35
weighted avg       0.83      0.83      0.83        35


***********
=== MedGemma Messidor Test Set (20%) ===
              precision    recall  f1-score   support

           0       0.88      1.00      0.93        21
           1       1.00      0.79      0.88        14

    accuracy                           0.91        35
   macro avg       0.94      0.89      0.91        35
weighted avg       0.93      0.91      0.91        35

Train on Medgemma messidor 80% -> test on all of idrid 
=== IDRiD Test Set (Cross-Dataset) ===
              precision    recall  f1-score   support

           0       0.92      0.79      0.85        71
           1       0.64      0.84      0.73        32

    accuracy                           0.81       103
   macro avg       0.78      0.82      0.79       103
weighted avg       0.83      0.81      0.81       103

A logistic regression model trained on TF-IDF embeddings of MedGemma-generated descriptions 
from Messidor achieved 91% accuracy on held-out Messidor data and 81% on IDRiD. 
The cross-dataset performance confirms that the descriptions encode generalizable 
referral-relevant signal

***************
=== GPT4o Messidor Test Set (20%) ===
              precision    recall  f1-score   support

           0       0.79      0.90      0.84        21
           1       0.82      0.64      0.72        14

    accuracy                           0.80        35
   macro avg       0.80      0.77      0.78        35
weighted avg       0.80      0.80      0.79        35

=== IDRiD Test Set (Cross-Dataset) ===
              precision    recall  f1-score   support

           0       0.69      0.85      0.76        71
           1       0.31      0.16      0.21        32

    accuracy                           0.63       103
   macro avg       0.50      0.50      0.48       103
weighted avg       0.57      0.63      0.59       103

****************
IMG: 20051020_62802_0100_PP, grade 4

GPt-4o: The retinal fundus image shows a large preretinal 
or vitreous hemorrhage in the inferior region of the retina. 
There is also evidence of neovascularization near the optic disc. 
No significant microaneurysms, hard exudates, or cotton wool 
spots are observed"


Medgemma: The image shows extensive retinal hemorrhages, 
exudates, and cotton wool spots. There is also evidence of 
neovascularization, with new blood vessels present on the disc 
and elsewhere in the retina. The overall appearance suggests a 
high-severity diabetic retinopathy with significant retinal 
damage and potential for vision loss.

*************
